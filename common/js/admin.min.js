!function(e){function t(e){$types=e.find('tr[data-name="type"] select option:selected'),"validated_field"==$types.first().val()&&e.find(".li-field-type").text("Validated: "+$types.last().text())}acf.add_action("ready append open_field",function(t){if("validated_field"==t.data("type")||"validated_field"==t.data("setting")){var i="validated_field"==t.data("type")?t:t.closest(".acf-field");if("true"!=i.data("validation-setup")){i.find("textarea.editor").hide(),ace.require("ace/ext/language_tools"),ace.config.loadModule("ace/snippets/snippets"),ace.config.loadModule("ace/snippets/php"),ace.config.loadModule("ace/ext/searchbox");var a=ace.edit(i.find(".ace-editor").attr("id"));a.setTheme("ace/theme/monokai"),a.getSession().setMode("ace/mode/text"),a.getSession().on("change",function(e){var t=a.getValue(),n=i.find(".validation-function").val();"php"==n?t=t.substr(t.indexOf("\n")+1):"regex"==n&&t.indexOf("\n")>0&&a.setValue(t.trim().split("\n")[0]),i.find("textarea.editor").val(t)}),i.find(".ace-editor").data("editor",a),i.find(".validation-function").on("change",function(){i.find(".validation-info div").hide(300),i.find(".validation-info div."+e(this).val()).show(300),$display="none"!=e(this).val(),i.find(".validation-settings").each(function(){$setting=e(this).hasClass("acf-field")?e(this):e(this).closest(".acf-field"),$toggle=$display?$setting.show(300):$setting.hide(300)});var t="<?php",a=i.find(".ace-editor").data("editor"),n=a.getValue();"none"==e(this).val()?i.filter('[data-name="pattern"], [data-name="message"]').hide(300):("php"==e(this).val()?(0!=n.indexOf(t)&&a.setValue(t+"\n"+n),a.getSession().setMode("ace/mode/php"),a.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),i.find(".ace-editor").css("height","420px")):(0==n.indexOf(t)&&a.setValue(n.substr(n.indexOf("\n")+1)),a.getSession().setMode("ace/mode/text"),a.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1,enableLiveAutocompletion:!1}),i.find(".ace-editor").css("height","18px")),a.resize(),a.gotoLine(1,1,!1),i.filter('[data-name="pattern"], [data-name="message"]').show(300))}),i.find(".validation-function").trigger("change"),i.find(".input-mask").on("change keyup blur",function(){$type=i.find('tr[data-name="type"] select option:selected').last(),$mask=i.find(".input-mask").closest(".acf-field"),$display=!1,-1==e.inArray($type.val(),["text","url","password"])?$mask.hide(300):($mask.show(300),$display=""!=e(this).val()),i.find(".mask-settings").each(function(){$setting=e(this).hasClass("acf-field")?e(this):e(this).closest(".acf-field"),$toggle=$display?$setting.show(300):$setting.hide(300)})}),i.find(".input-mask").trigger("change"),i.find(".validation-unique").on("change",function(){var t=e(this),i=t.closest(".acf-field").siblings('tr[data-name*="unique_"]');"non-unique"==t.val()||""==t.val()?i.hide(300):i.show(300)}),i.find(".validation-unique").trigger("change"),i.filter(".acf-sub_field").find(".field").each(function(){"acfcloneindex"==e(this).attr("id")&&e(this).find("select").trigger("change")}),i.data("validation-setup","true")}}}),acf.add_action("ready",function(i){i.find(".acf-field-object").each(function(){t(e(this))})}),acf.add_action("change_field_type",function(e){"validated_field"==e.data("type")&&t(e)}),acf.add_action("change_field_type",function(t){if("validated_field"==t.data("type")){var i="validated_field"==t.data("type")?t:t.closest(".acf-field");i.find(".input-mask").trigger("change");var a=i.find('tr[data-name="type"] select option:selected');i.find('tr[data-name="type"]').each(function(t,i){e(this).siblings().each(function(i,n){var d=e(this).data("setting");"undefined"!=typeof d&&d!=e(a[t]).val()&&e(this).hide()})})}})}(jQuery);